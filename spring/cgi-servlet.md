# CGI와 서블릿
#cake

해당 [게시글](https://github.com/seovalue/a-piece-of-cake/blob/main/webServer-WAS-Container.md)에서  CGI에 대해 다음과 같이 설명했다.

> **CGI (Common Gateway Interface)**  
> 웹 서버 상에서 프로그램을 동작시키기 위한 방법을 정의한 프로그램 (인터페이스)   
> 웹 서버와 외부 프로그램 사이에서 정보를 주고 받는 방법이나 규약 두 개 이상의 컴퓨터 간의 자료들을 주고 받는 프로그램 (주고 받는 것 그 자체를 의미하기도 함.)
>
> PHP, Python등의 언어는 Apache를 통해 CGI를 적용시키는 것이 가능한데, JAVA는 다른 방식으로 처리한다. -> 자바는 CGI와 같은 기능을 위해 컨테이너(서블릿)라는 것이 필요하다.

CGI가 무언가를 주고 받기 위한 `규약`이나 `프로그램`인 것은 알겠는데, 정확히 무엇이고, 왜 자바는 CGI를 적용시키는 것이 안되는걸까?

## CGI(공용 게이트웨이 인터페이스)
CGI는 클라이언트와 웹 서버가 컨텐츠를 주고받을 때 사용하는 규약이다.

동적인 콘텐츠에 대한 요구가 생기게 되면서, CGI가 등장하게 되었다.
보통 웹 서버의 역할은 요청에 알맞은 정적 리소스를 제공하는 것이다. 하지만 동적인 컨텐츠에 대한 요구가 들어오게 되면, 웹 서버 혼자서는 이를 처리할 수 없다. 결국, 웹 서버가 애플리케이션과 통신하여 처리가 완료된 결과값을 받은 뒤 클라이언트에게 정적 컨텐츠로 다시 응답할 수 있는 인터페이스가 필요하게 된 것이다.
즉, 인터페이스로서 특정 플랫폼에 의존하지 않고 웹 서버로부터 외부 프로그램을 호출하는 방식(규약)을 정의해놓은 것을 CGI라고 한다.

이러한 CGI는 요청 당 프로세스를 만들어 처리하고, 응답한다. 이렇게 되는 경우 매우 많은 요청이 들어올 경우, 매우 많은 프로세스를 생성해야하는 낭비가 발생한다.

## Java Servlet
서블릿이란 웹 프로그래밍에서 클라이언트의 요청을 처리하고 그 결과를 다시 클라이언트에게 전송하는 프로그래밍 기술이다. 즉, 자바를 이용한 애플리케이션 서버로 요청을 전달하기 위한 일종의 규약으로서 서블릿을 이용할 수 있다.

즉, 서블릿을 이용하여 CGI의 역할을 수행할 수 있으며 Servlet은 프로그램이 실행될 때 스레드 단위로 실행되어 서버의 부하를 줄일 수 있다.

하지만 이러한 서블릿도 요청에 알맞은 서블릿을 새로 생성해야했는데, 이를 한 곳에서 잡아 관리하기 위해 등장한 것이 `Dispatcher Servlet`이다.

> **Difference Between CGI and Servlet**
> 1. CGI는 요청 당 프로세스로, Servlet은 요청 당 스레드로 처리한다.
> 2. Servlet과 CGI는 완전히 별개의 개념이 아니라, Java에서 CGI의 역할을 수행하는 것이 Servlet이라고 볼 수 있다.


### 참고 자료
* [YouTube](https://www.youtube.com/watch?v=calGCwG_B4Y&t=1s)
* 프로가 되기 위한 웹 기술 입문
* [공용 게이트웨이 인터페이스 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EA%B3%B5%EC%9A%A9_%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4)